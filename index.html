<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gym Tracker</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="watermark" aria-hidden="true">
      <svg viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round">
          <path d="M70 120H170" />
          <rect x="32" y="86" width="20" height="68" rx="8" />
          <rect x="52" y="96" width="16" height="48" rx="6" />
          <rect x="172" y="96" width="16" height="48" rx="6" />
          <rect x="188" y="86" width="20" height="68" rx="8" />
        </g>
      </svg>
    </div>

    <main id="login-view" class="login-view">
      <section class="login-card">
        <div class="login-brand">
          <div class="login-logo" aria-hidden="true">
            <svg viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg">
              <g fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round">
                <path d="M70 120H170" />
                <rect x="32" y="86" width="20" height="68" rx="8" />
                <rect x="52" y="96" width="16" height="48" rx="6" />
                <rect x="172" y="96" width="16" height="48" rx="6" />
                <rect x="188" y="86" width="20" height="68" rx="8" />
              </g>
            </svg>
          </div>
          <span class="login-chip">Gym Social</span>
        </div>
        <h1>Gym Tracker</h1>
        <p>Accede con tu cuenta o entra con Twitter (modo local).</p>

        <div class="auth-toggle" role="tablist" aria-label="Modo de acceso">
          <button id="tab-login" class="auth-tab active" type="button" role="tab" aria-selected="true">Entrar</button>
          <button id="tab-register" class="auth-tab" type="button" role="tab" aria-selected="false">Crear cuenta</button>
        </div>

        <form id="auth-form" class="login-form">
          <label>
            Usuario
            <input type="text" id="auth-user" required />
          </label>
          <label>
            Contrasena
            <input type="password" id="auth-pass" required />
          </label>
          <label id="confirm-wrap" class="hidden">
            Confirmar contrasena
            <input type="password" id="auth-pass-confirm" />
          </label>
          <button id="auth-submit" type="submit">Entrar</button>
        </form>

        <div class="social-login">
          <button id="twitter-login" type="button" class="twitter-btn">Entrar con Twitter</button>
        </div>
        <p id="login-error" class="login-error" aria-live="polite"></p>
      </section>
    </main>

    <main id="app-root" class="app hidden">
      <header class="app-header">
        <div>
          <h1>Gym Tracker</h1>
          <p id="welcome-message">Bienvenido</p>
        </div>
        <div class="header-actions">
          <button id="notification-btn" class="neutral" type="button">
            Notificaciones
            <span id="notification-count" class="notification-count">0</span>
          </button>
          <button id="logout-btn" class="neutral" type="button">Salir</button>
        </div>
      </header>

      <section id="notification-panel" class="notification-panel hidden" aria-label="Centro de notificaciones">
        <h2>Notificaciones</h2>
        <ul id="notification-list" class="notification-list"></ul>
      </section>

      <nav class="app-nav" aria-label="Secciones">
        <button class="nav-tab active" type="button" data-view="home">Inicio</button>
        <button class="nav-tab" type="button" data-view="workout">Entrenamiento</button>
        <button class="nav-tab" type="button" data-view="stats">Estadisticas</button>
        <button class="nav-tab" type="button" data-view="profile">Mi perfil</button>
        <button id="admin-tab" class="nav-tab hidden" type="button" data-view="admin">Admin</button>
      </nav>

      <section id="view-home" class="app-view">
        <div class="home-grid">
          <section class="card feed-card">
            <h2>Inicio inteligente</h2>
            <p class="section-intro">Resumen util de tu progreso y actividad de la comunidad.</p>
            <section class="home-highlights">
              <div class="home-topic-tabs" id="home-topic-tabs">
                <button type="button" class="topic-tab active" data-topic="logros">Logros</button>
                <button type="button" class="topic-tab" data-topic="comida">Comida</button>
                <button type="button" class="topic-tab" data-topic="recuperacion">Recuperacion</button>
              </div>
              <div id="home-spotlight-list" class="home-spotlight-list"></div>
              <div id="home-achievements" class="home-achievements"></div>
            </section>
            <h3 class="home-subtitle">Actividad</h3>
            <div id="feed-list" class="feed-list"></div>
            <div class="form-actions">
              <button id="load-more-trends" type="button">Cargar mas actividad</button>
            </div>
          </section>

          <aside class="home-side">
            <section class="card">
              <h2>Comunidad</h2>
              <p class="section-intro">Usuarios activos y acceso rapido a mensaje privado.</p>
              <div id="community-user-list" class="community-user-list"></div>
            </section>
            <section id="feed-detail-panel" class="card feed-detail-card hidden">
              <h2 id="feed-detail-title">Detalle</h2>
              <p id="feed-detail-meta" class="section-intro">-</p>
              <p id="feed-detail-text"></p>
              <div class="feed-detail-insight">
                <h3>Por que te sirve</h3>
                <p id="feed-detail-why">-</p>
                <h3>Accion recomendada</h3>
                <p id="feed-detail-action">-</p>
              </div>
              <div class="feed-detail-actions">
                <button id="feed-detail-save" type="button" class="neutral">Guardar en perfil</button>
                <button id="feed-detail-use" type="button">Usar en mi sesion</button>
              </div>
            </section>
          </aside>
        </div>
      </section>

      <section id="view-workout" class="app-view hidden">
        <div class="two-col">
          <section class="card planner-card">
            <h2>Planifica tu sesion</h2>
            <p class="section-intro">Selecciona grupo muscular y te guiamos con una rutina clara y ordenada.</p>
            <div class="muscle-options" id="muscle-options">
              <button type="button" class="muscle-btn" data-group="pierna" aria-label="Pierna" title="Pierna"><span>🦵</span><small>Pierna</small></button>
              <button type="button" class="muscle-btn" data-group="pecho" aria-label="Pecho" title="Pecho"><span>🫀</span><small>Pecho</small></button>
              <button type="button" class="muscle-btn" data-group="espalda" aria-label="Espalda" title="Espalda"><span>🏋️</span><small>Espalda</small></button>
              <button type="button" class="muscle-btn" data-group="hombro" aria-label="Hombro" title="Hombro"><span>💪</span><small>Hombro</small></button>
              <button type="button" class="muscle-btn" data-group="brazos" aria-label="Brazos" title="Brazos"><span>💪🏻</span><small>Brazos</small></button>
              <button type="button" class="muscle-btn" data-group="gemelo" aria-label="Gemelo" title="Gemelo"><span>🦿</span><small>Gemelo</small></button>
              <button type="button" class="muscle-btn" data-group="gluteo" aria-label="Gluteo" title="Gluteo"><span>🍑</span><small>Gluteo</small></button>
            </div>
            <div id="exercise-menu" class="exercise-menu hidden">
              <p class="menu-title">Ejercicios sugeridos para <strong id="selected-group-label"></strong></p>
              <div id="exercise-options" class="exercise-options"></div>
            </div>
          </section>

          <section class="card recommendation-card">
            <h2>Rutina recomendada</h2>
            <label class="routine-picker">
              Estilo de rutina
              <select id="routine-style">
                <option value="hypertrophy">Hipertrofia clasica</option>
                <option value="heavy-duty">Heavy Duty</option>
                <option value="ppl">Push Pull Legs</option>
                <option value="upper-lower">Upper / Lower</option>
                <option value="full-body">Full Body</option>
              </select>
            </label>
            <p class="section-intro" id="recommendation-intro">Selecciona un grupo muscular para generar una rutina.</p>
            <ul id="recommendation-list" class="recommendation-list">
              <li>Sin recomendaciones por ahora.</li>
            </ul>
          </section>
        </div>

        <section class="card">
          <h2>Estadisticas rapidas</h2>
          <div class="stats quick-stats">
            <article>
              <h3>Entradas</h3>
              <p id="quick-total-entries">0</p>
            </article>
            <article>
              <h3>Volumen total (kg)</h3>
              <p id="quick-total-volume">0</p>
            </article>
            <article>
              <h3>Ultimo entrenamiento</h3>
              <p id="quick-last-workout">-</p>
            </article>
          </div>
        </section>

        <section class="card insights-card">
          <h2>Lectura de tus cargas</h2>
          <p class="section-intro">Convertimos tus pesos en informacion accionable para progresar.</p>
          <div class="stats">
            <article>
              <h3>Resumen</h3>
              <p id="insight-summary">Sin datos aun.</p>
            </article>
            <article>
              <h3>Intensidad</h3>
              <p id="insight-load">-</p>
            </article>
            <article>
              <h3>Progreso</h3>
              <p id="insight-progress">-</p>
            </article>
            <article>
              <h3>Proxima carga sugerida</h3>
              <p id="insight-next">-</p>
            </article>
          </div>
        </section>

        <section class="card">
          <h2>Registrar ejercicio</h2>
          <p class="section-intro">Ingresa tus series de forma rapida y visual. Todo queda guardado automaticamente.</p>
          <form id="entry-form" class="entry-form">
            <div class="grid">
              <label>
                Fecha
                <input type="date" id="date" required />
              </label>
              <label>
                Ejercicio
                <input type="text" id="exercise" placeholder="Ej: Sentadilla" required />
              </label>
              <label>
                Series
                <input type="number" id="sets" min="1" required />
              </label>
              <label>
                Reps
                <input type="number" id="reps" min="1" required />
              </label>
              <label>
                Peso (kg)
                <input type="number" id="weight" min="0" step="0.5" required />
              </label>
              <label>
                Notas
                <input type="text" id="notes" placeholder="Opcional" />
              </label>
            </div>
            <div class="form-actions">
              <button type="submit">Guardar</button>
            </div>
          </form>
        </section>

        <section class="card">
          <h2>Historial</h2>
          <div class="toolbar">
            <input type="text" id="search" placeholder="Filtrar por ejercicio..." />
            <button id="clear-all" class="danger" type="button">Borrar todo</button>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Ejercicio</th>
                  <th>Series</th>
                  <th>Reps</th>
                  <th>Peso</th>
                  <th>1RM est.</th>
                  <th>Volumen</th>
                  <th>Notas</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="entries-body"></tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="view-stats" class="app-view hidden">
        <section class="card">
          <h2>Resumen general</h2>
          <div class="stats">
            <article>
              <h3>Entradas</h3>
              <p id="total-entries">0</p>
            </article>
            <article>
              <h3>Volumen total (kg)</h3>
              <p id="total-volume">0</p>
            </article>
            <article>
              <h3>Ultimo entrenamiento</h3>
              <p id="last-workout">-</p>
            </article>
          </div>
        </section>

        <section class="card">
          <h2>Resultados por periodo</h2>
          <p class="section-intro">Consulta tu progreso acumulado por dia, mes y ano.</p>
          <label class="period-picker">
            Fecha de referencia
            <input type="date" id="period-date" />
          </label>
          <div class="stats">
            <article>
              <h3>Dia</h3>
              <p id="period-day">0 ejercicios | 0 kg</p>
            </article>
            <article>
              <h3>Mes</h3>
              <p id="period-month">0 ejercicios | 0 kg</p>
            </article>
            <article>
              <h3>Ano</h3>
              <p id="period-year">0 ejercicios | 0 kg</p>
            </article>
          </div>
        </section>

        <section class="card daily-analysis-card">
          <h2>Analisis por dia</h2>
          <p class="section-intro">Selecciona una fecha y revisa tus ejercicios con una lectura clara y accionable.</p>
          <div class="mini-calendar">
            <div class="mini-calendar-header">
              <button id="calendar-prev" type="button" class="neutral">Mes anterior</button>
              <strong id="calendar-month-label">-</strong>
              <button id="calendar-next" type="button" class="neutral">Mes siguiente</button>
            </div>
            <div class="mini-calendar-weekdays">
              <span>L</span><span>M</span><span>X</span><span>J</span><span>V</span><span>S</span><span>D</span>
            </div>
            <div id="calendar-grid" class="mini-calendar-grid"></div>
            <div class="calendar-legend" aria-label="Leyenda de intensidad">
              <small>Menor carga</small>
              <span class="legend-dot level-1"></span>
              <span class="legend-dot level-2"></span>
              <span class="legend-dot level-3"></span>
              <span class="legend-dot level-4"></span>
              <small>Mayor carga</small>
            </div>
          </div>
          <label class="period-picker">
            Dia de entrenamiento
            <input type="date" id="daily-date" />
          </label>
          <div id="daily-summary" class="daily-summary">Sin datos para la fecha seleccionada.</div>
          <ul id="daily-exercise-list" class="daily-exercise-list"></ul>
          <div id="daily-insight" class="daily-insight">Carga un entrenamiento para generar interpretacion inteligente.</div>
        </section>

        <section class="card">
          <h2>Resumen semanal agrupado</h2>
          <p class="section-intro">Agrupado por lo que entrenaste para evitar listas largas.</p>
          <div id="ai-coach-summary" class="daily-insight">Sin datos semanales para analizar.</div>
          <ul id="grouped-stats-list" class="grouped-stats-list"></ul>
        </section>

        <section class="card">
          <h2>Grafico de barras semanal</h2>
          <p class="section-intro">Volumen total por grupo muscular en los ultimos 7 dias.</p>
          <div id="weekly-bar-chart" class="bar-chart"></div>
        </section>
      </section>

      <section id="view-profile" class="app-view hidden">
        <div class="two-col">
          <section class="card profile-card">
            <div class="profile-cover"></div>
            <div class="profile-avatar-wrap">
              <img id="profile-avatar" class="profile-avatar" alt="Foto de perfil" src="" />
              <label class="avatar-upload">
                Cambiar foto
                <input id="profile-photo" type="file" accept="image/*" />
              </label>
            </div>
            <h2>Informacion personal</h2>
            <form id="profile-form" class="grid">
              <label>
                Nombre
                <input type="text" id="profile-name" />
              </label>
              <label>
                Edad
                <input type="number" id="profile-age" min="0" />
              </label>
              <label>
                Altura (cm)
                <input type="number" id="profile-height" min="0" />
              </label>
              <label>
                Peso (kg)
                <input type="number" id="profile-weight" min="0" step="0.1" />
              </label>
              <label>
                Objetivo
                <input type="text" id="profile-goal" placeholder="Ej: Ganar masa muscular" />
              </label>
              <label>
                Rutina favorita
                <select id="profile-routine">
                  <option value="hypertrophy">Hipertrofia clasica</option>
                  <option value="heavy-duty">Heavy Duty</option>
                  <option value="ppl">Push Pull Legs</option>
                  <option value="upper-lower">Upper / Lower</option>
                  <option value="full-body">Full Body</option>
                </select>
              </label>
            </form>
            <div class="form-actions">
              <button id="save-profile" type="button">Guardar perfil</button>
            </div>
            <div class="backup-actions">
              <button id="export-backup" type="button" class="neutral">Descargar respaldo</button>
              <button id="import-backup" type="button" class="neutral">Restaurar respaldo</button>
              <input id="import-backup-file" type="file" accept="application/json" class="hidden" />
            </div>
            <p id="profile-message" class="muted-message"></p>
          </section>

          <section class="card">
            <h2>Ejercicios favoritos</h2>
            <p class="section-intro">Guarda tus movimientos clave para acceso rapido.</p>
            <div class="favorite-add">
              <input id="favorite-input" type="text" placeholder="Ej: Sentadilla frontal" />
              <button id="add-favorite" type="button">Agregar</button>
            </div>
            <ul id="favorite-list" class="favorite-list"></ul>
          </section>
        </div>

        <div class="two-col">
          <section class="card">
            <h2>Guardados de inicio</h2>
            <p class="section-intro">Contenido que guardaste desde Logros, Comida y Recuperacion.</p>
            <div id="profile-saved-list" class="saved-content-list"></div>
          </section>

          <section class="card">
            <h2>Logros y recomendaciones</h2>
            <p class="section-intro">Sugerencias inteligentes para el siguiente paso.</p>
            <ul id="profile-achievement-list" class="profile-achievement-list"></ul>
            <ul id="profile-recommendation-list" class="profile-recommendation-list"></ul>
          </section>
        </div>

        <section class="card">
          <h2>Mi muro</h2>
          <p class="section-intro">Publica avances, rutinas y notas para tu perfil.</p>
          <form id="post-form" class="post-form">
            <textarea id="post-input" rows="3" maxlength="280" placeholder="Escribe algo sobre tu entrenamiento..."></textarea>
            <div class="form-actions">
              <button type="submit">Publicar</button>
            </div>
          </form>
          <div id="my-posts-list" class="feed-list"></div>
        </section>
      </section>

      <section id="view-admin" class="app-view hidden">
        <section class="card">
          <h2>Dashboard de administracion</h2>
          <div class="stats">
            <article>
              <h3>Usuarios registrados</h3>
              <p id="admin-users-count">0</p>
            </article>
            <article>
              <h3>Publicaciones</h3>
              <p id="admin-posts-count">0</p>
            </article>
            <article>
              <h3>Mensajes chat</h3>
              <p id="admin-messages-count">0</p>
            </article>
            <article>
              <h3>Entradas de entrenamiento</h3>
              <p id="admin-entries-count">0</p>
            </article>
          </div>
        </section>

        <section class="card">
          <h2>Usuarios y actividad</h2>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Usuario</th>
                  <th>Proveedor</th>
                  <th>Entradas</th>
                  <th>Publicaciones</th>
                  <th>Objetivo</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="admin-users-body"></tbody>
            </table>
          </div>
        </section>
      </section>
    </main>

    <section id="chat-panel" class="chat-panel hidden" aria-label="Chat privado">
      <header class="chat-panel-header">
        <strong id="chat-with">Chat privado</strong>
        <button id="chat-close" type="button" class="inline-button">Cerrar</button>
      </header>
      <div id="chat-messages" class="chat-messages"></div>
      <form id="chat-form" class="chat-form">
        <input id="chat-input" type="text" placeholder="Escribe un mensaje..." />
        <button type="submit">Enviar</button>
      </form>
    </section>

    <script src="./app.js"></script>
  </body>
</html>
